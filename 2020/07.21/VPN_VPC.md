# VPN과 VPC

## VPN (Virtual Private Network)

> 가상사설망(假想私設網) 또는 VPN(영어: Virtual private network)은 공중 네트워크를 통해 한 회사나 몇몇 단체가 내용을 바깥 사람에게 드러내지 않고 통신할 목적으로 쓰이는 사설 통신망이다. [위키백과](https://ko.wikipedia.org/wiki/%EA%B0%80%EC%83%81%EC%82%AC%EC%84%A4%EB%A7%9D)

VPN을 번역하면 가상 사설망이다. 말 그대로 실제 네트워크가 아니라 가상의 네트워크다.

어떤 회사에서 네트워크가 전체 PC를 연결하는 형태로 구성되어 있다고 생각해보자. 이를 따로따로 세부 네트워크로 가상의 사설망을 구축할 수 있다. 이게 VPN인 것이다.

> 그러면 보통 회사 밖에서 사내망을 사용하기 위해 VPN을 쓰는데, 이는 어떤 원리일까?

회사 밖에서(예를들어 우리집) 회사 내부망에 접속하고 싶다. A라는 PC는 Net1(VPN 서버)이라는 네트워크에 접속한다고 해보자.(이 Net1이라는 네트워크는 사내 네트워크에 접근할 수 있다.) 그러면 이제 A는 Net1 네트워크를 통해 자신의 네트워크 주소를 Net1의 사설망 주소로 보내가 된다. 그렇기 때문에 A는 이제 VPN 서버를 통해서 사내 네트워크에 접근할 수 있는 것이다.

## VPC (Virtual Private Cloud)

가상사설망을 만들어서 하나의 네트워크를 논리적으로 여러 개로 분리하는 것처럼 VPC는 각 VM들을 하나의 네트워크로 묶어서 관리할 수 있게 된다.

VPC를 적용하면 각 VPC별로 네트워크 설정을 다르게 할 수 있고 서로 독립된 네트워크로 동작한다. VPC에서 사용하는 사설 아이피 대역은 아래와 같다. ([RFC1918](https://tools.ietf.org/html/rfc1918))

- 10.0.0.0 ~ 10.255.255.255(10/8 prefix)
- 172.16.0.0 ~ 172.31.255.255(182.16/12 prefix)
- 192.168.0.0 ~ 192.168.255.255(192.168/16 prefix)

### NAT Gateway

NAT 게이트웨이는 private subnet이 인터넷과 통신하기 위한 나가는 방향의 인스턴스다. NAT 게이트웨이는 퍼블릭 서브넷상에서 동작하고 private subnet이 외부로 요청하는 아웃바운드 트래픽을 받아 인터넷 게이트웨이와 연결한다.
