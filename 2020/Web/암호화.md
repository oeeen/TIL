# Hashing, 암호화

## Hashing

평문을 암호문으로 바꾸는 것은 가능하지만, 암호문을 평문으로 복호화하는 것은 불가능한 방식

단순하게 생각하면 필요 없을 것 같지만, 비밀번호 같은 곳에 쓸 수 있다. SHA256 같은 기법들이 있다. 특정 입력값에 대해 똑같은 출력이 나온다. 해싱을 적용한다고 해서 보안상으로 완벽하진 않다. 결국에는 특정한 비트수로 변환이 되는 것이기 때문에, 입력값이 다르더라도 출력값이 같은 경우가 나올 수도 있다.

## 양방향 암호화

암호화와 복호화가 모두 가능한 알고리즘이다. 대칭키와 비대칭키 방식으로 나누어진다.

### 대칭키 방식

암호화와 복호화에 동일한 키를 사용

### 비대칭키 방식

암호화와 복호화에 다른 키를 사용한다. 비대칭키 방식은 공개키와 개인키를 가지고 암호화, 복호화를 한다.

SSL에서 공개키 암호화 방식을 채택하고 있다. 송신하는 측은 수신하는 측의 공개키를 사용해서 암호화해서 보내고 이 암호문을 수신측에서는 자신의 비밀키를 사용해서 복호화한다.

## HTTPS의 암호화 과정

일단 HTTPS는 HTTP에 SSL 같은 프로토콜을 조합하여 암호화 한다.

SSL은 공개키 암호화 방식을 사용한다. 암호화에 두개의 키(공개키와 비밀키)를 사용한다. 보내는 사람은 받는 사람의 공개키를 사용하여 암호화 하고 보낸다. 그러면 받는 사람은 자신의 비밀키를 사용하여 복호화한다. 비밀키를 통신에 사용하지 않기 때문에 노출을 걱정할 필요도 없다.

HTTPS는 공개키 암호화 방식으로 공통키 암호방식에 사용할 공통키를 교환하고, 그 다음부터는 이 공통키를 가지고 통신을 한다. 이유는 공개키 방식이 공통키 방식보다 느리기 때문이라고 한다.

공통키 암호화 방식은 대칭키 암호화 방식이라고도 하는데 암호화와 복호화에 동일한 키를 사용하는 방식이다.

그러나 공통키가 중간에 바꿔치기 당했는지는 어떻게 증명 할까? -> 이를 위해서 인증 기관(CA: Certificate Authority)과 공개키 증명서가 이용되고 있다. 유명한 인증기관에는 VeriSign이 있다.

인증 기관은 다음과 같이 이용된다.

1. 서버의 운영자가 인증 기관에 공개키를 제출
2. 인증 기관은 제출된 공개키에 디지털 서명을 하고 서명이 끝난 공개키를 만든다.
3. 공개키 인증서에 서명이 끝난 공개키를 담는다.
4. 서버는 이 공개키 인증서를 클라이언트에 보내고 공개키 암호로 통신을 한다.
5. 공개키 인증서를 받은 클라이언트는 증명 기관의 공개키를 사용해서 서버의 공개키를 인증한 것이 CA라는 것과 서버의 공개키가 신뢰할 수 있다는 것을 알 수 있다.
